<!DOCTYPE html>
<html>
<head>
  <title></title>
  <base target="_parent"/>
  <style>
      body {
          overflow: hidden;
          margin: 0px;
      }

      .table {
          display: table;
          width: 100%;
      }

      #main {
          position: absolute;
          top: 50px;
      }

      .row {
          display: table-row;
          width: 100%;
      }

      td{
          padding: 0px;
          margin:0px;
      }
      .cell {
          display: table-cell;
          vertical-align: top;
          width: 60%;
      }

      .contents {
          margin: 5px 5px 30px 5px;
          bottom: 0px;
      }


  </style>
  <script type="text/javascript">

  </script>
</head>
<body onresize="resizeTable()" onload="resizeTable();switchViews()">

<div id="main" class="table">
  <div class="row">
    <div style="height: auto; text-align: center;background-color: #f5f5f5;border: 1px solid rgba(0, 0, 0, 0.05);border-radius: 4px;">
      <iframe id="main-display" style="border: 1px dotted #999; padding: 0px; text-align: center; width: 100%; overflow: hidden !important; height: 710px;" src="/home/map_main"></iframe>
    </div>
    <div class="cell">
      <table>
        <tr>
          <td>
            <iframe id="report-display-dynamic" style="border: none;overflow: auto;"></iframe>
          </td>
        </tr>
          <tr>
          <td>
            <iframe id="report-display-static" style="border: none;overflow: auto;"></iframe>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>

<script>
    <!--

    var sites = []
    var current_pos = 0;
    var timerHnd;

    var timerSpacing = 40;


    <% (@sites || []).each do |site| %>
    sites.push('<%= site.name.downcase %>')
    <% end %>

    function __$(id) {
        return document.getElementById(id);
    }


    function switchViews() {
        clearTimeout(timerHnd);

        if ((current_pos + 1) >= sites.length) {
            current_pos = 0;
        }
        else {
            current_pos += 1;
        }

        __$("report-display-dynamic").setAttribute("src", "/report/dynamic_view?site=" + sites[current_pos]);
        __$("report-display-static").setAttribute("src", "/report/static_view?site=" + sites[current_pos]);
        timerHnd = setTimeout("switchViews()", timerSpacing * 1000);
    }

    function resizeTable() {
        __$("main").style.height = (window.innerHeight - 90) + "px";

        __$("main-display").style.height = (window.innerHeight - 90) + "px";
        __$("main-display").style.width = (screen.width * 0.345) + "px";

        __$("report-display-dynamic").style.height = (0.4 * window.innerHeight) + "px";
        __$("report-display-dynamic").style.width = (screen.width * 0.65) + "px";

        __$("report-display-static").style.height = (0.6 * window.innerHeight) + "px";
        __$("report-display-static").style.width = (screen.width * 0.645) + "px";
    }

    timerHnd = setTimeout("switchViews()", timerSpacing * 1000);

    //-->
</script>

</body>
</html>
